<% content_for :title, @product.name %>
<%= link_to 'Compare', product_compare_path(@product), class: 'btn btn-primary' %>

<div class="card w-96 bg-base-100 shadow-xl py-3">
  <figure>
    <% if @product.images.attached? %>
      <div class="w-64 carousel rounded-box">
        <% @product.images.each_with_index do |image, index|%>
          <div class="carousel-item w-full">
            <%= image_tag image , class: 'object-scale-down h-36 w-50', class: 'w-full', alt: "product-image-#{index}" %>
          </div> 
        <% end %>
      </div>
    <% else %>
        <img class="max-h-20" src="https://dummyimage.com/640x360/fff/aaa" alt="placeholder">
    <% end %>
  </figure>
  <div class="card-body">
    <h2 class="card-title"><h2><%= @product.name %></h2></h2>
    <p><%= @product.description %></p>
    <p><%= number_to_currency(@product.price, unit: 'â‚º') %></p>
    <div data-controller="cart" class="card-actions justify-end">
      <input type="number" value="1" min="1" name="amount" class="input input-bordered w-1/2 max-w-xs">
      <input type="hidden" value="<%= @product.id %>">
      <input type="hidden" value="<%= @product.name %>">
      <input type="hidden" value="<%= @product.price.to_f %>">
      <button data-action="click->cart#addToCart" class="btn btn-primary">Add to Cart</button>
    </div>
  </div>
</div>

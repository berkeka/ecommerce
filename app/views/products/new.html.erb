<% content_for :title, 'New Product' %>

<%= form_with model: @product do |f| %>
    <div class="form-control w-full max-w-xs">
        <%= f.label :name, class: 'label label-text' %><br />
        <%= f.text_field :name, class: 'input input-bordered w-full max-w-xs'%>
    </div>
    <div class="form-control w-full max-w-xs">
        <%= f.label :description, class: 'label label-text' %><br />
        <%= f.text_area :description, class: 'input input-bordered w-full max-w-xs'%>
    </div>
    <div class="form-control w-full max-w-xs">
        <%= f.label :price, class: 'label label-text' %><br />
        <%= f.number_field :price, in: 1.0..9999999.0, step: 0.5,  class: 'input input-bordered w-full max-w-xs'%>
    </div>
    <div class="form-control w-full max-w-xs">
        <%= f.label :sub_category, class: 'label label-text' %><br />
        <%= f.select :sub_category_id, select_category_list(@categories), {}, class: 'select select-bordered' %>
    </div>

    <div class="form-control w-full max-w-xs">
        <%= f.label :brand, class: 'label label-text' %><br />
        <%= f.select :brand_id, options_from_collection_for_select(@brands, 'id', 'name'), {}, class: 'select select-bordered' %>
    </div>

    <div class="form-control w-full max-w-xs">
        <%= f.label :main_image, class: 'label label-text' %><br />
        <%= f.file_field :main_image %>
    </div>

    <div class="form-control w-full max-w-xs">
        <%= f.label :images, class: 'label label-text' %><br />
        <%= f.file_field :images, multiple: true %>
    </div>

    <div class="form-control w-full max-w-xs">
        <%= f.label 'Tags', class: 'label label-text' %><br />
        <%= f.text_field :tag_list, class: 'input input-bordered inline-flex gap-2 invisible' %>
    </div>

    <div class="actions">
        <%= f.submit 'Create', class: 'btn btn-ghost' %>
    </div>
<% end %>

<script>
    window.addEventListener('load', (event) => {
        var input = document.querySelector('#product_tag_list');
        tagify = new Tagify(input, {})
        document.querySelector('.tagify').classList.remove('invisible');
    });
</script>

<style>
    .tagify {
        flex-wrap: nowrap;
    }
</style>
